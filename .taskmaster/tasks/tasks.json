{
  "master": {
    "tasks": [
      {
        "id": 14,
        "title": "Configure HeyGen Environment Variable",
        "description": "Add HEYGEN_API_KEY environment variable to the project configuration for HeyGen API authentication.",
        "details": "1. Add HEYGEN_API_KEY to .env.local file alongside existing OPENROUTER_API_KEY\n2. Update .env.example (if it exists) to document the new variable\n3. The key format should follow HeyGen API v2 standards\n\nPseudo-code:\n```\n# .env.local\nOPENROUTER_API_KEY=your_openrouter_key\nHEYGEN_API_KEY=your_heygen_api_key_here\n```\n\nNo code changes needed in next.config.js as Next.js automatically loads .env.local variables server-side.",
        "testStrategy": "1. Create .env.local with placeholder HEYGEN_API_KEY\n2. Verify the variable is accessible in API routes via process.env.HEYGEN_API_KEY\n3. Test that missing key returns appropriate error message in the API route",
        "priority": "high",
        "dependencies": [],
        "status": "done",
        "subtasks": []
      },
      {
        "id": 15,
        "title": "Create HeyGen TypeScript Types",
        "description": "Define TypeScript interfaces for HeyGen API v2 request and response payloads as specified in the PRD.",
        "details": "Create types in src/types/heygen.ts:\n\n```typescript\n// Request payload for video generation\nexport interface HeyGenVideoPayload {\n  video_inputs: {\n    character: {\n      type: 'avatar';\n      avatar_id: string;\n      avatar_style?: string;\n    };\n    voice: {\n      type: 'text';\n      input_text: string;\n      voice_id: string;\n      speed?: number;\n    };\n  }[];\n  dimension?: { width: number; height: number };\n}\n\n// Response from POST /v2/video/generate\nexport interface HeyGenGenerateResponse {\n  error?: { code?: string; message?: string };\n  data: {\n    video_id: string;\n  };\n}\n\n// Response from GET /v1/video_status.get\nexport interface HeyGenStatusResponse {\n  data: {\n    status: 'processing' | 'completed' | 'failed' | 'pending';\n    video_url?: string;\n    thumbnail_url?: string;\n    error?: { code?: string; message?: string };\n  };\n}\n\n// Video generation states for frontend\nexport type VideoStatus = 'idle' | 'generating_script' | 'processing' | 'completed' | 'failed';\n\nexport interface VideoData {\n  url: string | null;\n  status: VideoStatus;\n}\n```",
        "testStrategy": "1. TypeScript compiler should validate types without errors\n2. Import types in heygen.ts library and verify no type errors\n3. Use types in API routes and verify correct type inference",
        "priority": "high",
        "dependencies": [
          14
        ],
        "status": "done",
        "subtasks": []
      },
      {
        "id": 16,
        "title": "Create HeyGen API Client Library",
        "description": "Implement src/lib/heygen.ts with typed functions for video generation and status checking using HeyGen API v2.",
        "details": "Create src/lib/heygen.ts following the existing OpenRouterClient pattern:\n\n```typescript\nimport type { HeyGenGenerateResponse, HeyGenStatusResponse, HeyGenVideoPayload } from '@/types/heygen';\n\nconst HEYGEN_BASE_URL = 'https://api.heygen.com';\nconst DEFAULT_AVATAR_ID = 'Eric_public_pro2_20230608';\nconst DEFAULT_VOICE_ID = '2d5b0e6cf361460aa96d87d995c80882'; // Russian male\n\nexport class HeyGenError extends Error {\n  constructor(\n    message: string,\n    public statusCode?: number,\n    public details?: string\n  ) {\n    super(message);\n    this.name = 'HeyGenError';\n  }\n}\n\nexport async function generateVideo(\n  script: string,\n  apiKey: string\n): Promise<string> {\n  const payload: HeyGenVideoPayload = {\n    video_inputs: [{\n      character: {\n        type: 'avatar',\n        avatar_id: DEFAULT_AVATAR_ID,\n      },\n      voice: {\n        type: 'text',\n        input_text: script,\n        voice_id: DEFAULT_VOICE_ID,\n      },\n    }],\n  };\n\n  const response = await fetch(`${HEYGEN_BASE_URL}/v2/video/generate`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      'X-Api-Key': apiKey,\n    },\n    body: JSON.stringify(payload),\n  });\n\n  if (!response.ok) {\n    const errorText = await response.text();\n    throw new HeyGenError(`HeyGen API error: ${response.status}`, response.status, errorText);\n  }\n\n  const data: HeyGenGenerateResponse = await response.json();\n  if (data.error) {\n    throw new HeyGenError(data.error.message || 'Unknown HeyGen error');\n  }\n\n  return data.data.video_id;\n}\n\nexport async function checkVideoStatus(\n  videoId: string,\n  apiKey: string\n): Promise<{ status: string; url: string | null }> {\n  const response = await fetch(\n    `${HEYGEN_BASE_URL}/v1/video_status.get?video_id=${videoId}`,\n    {\n      headers: { 'X-Api-Key': apiKey },\n    }\n  );\n\n  if (!response.ok) {\n    throw new HeyGenError(`Status check failed: ${response.status}`, response.status);\n  }\n\n  const data: HeyGenStatusResponse = await response.json();\n  return {\n    status: data.data.status,\n    url: data.data.video_url || null,\n  };\n}\n```",
        "testStrategy": "1. Unit test generateVideo with mocked fetch - verify correct payload structure\n2. Unit test checkVideoStatus with mocked responses for each status type\n3. Test error handling for 401, 429, 500 responses\n4. Integration test with real HeyGen API key (manual)",
        "priority": "high",
        "dependencies": [
          15
        ],
        "status": "done",
        "subtasks": []
      },
      {
        "id": 17,
        "title": "Create Script Generator Function",
        "description": "Add generateOneMinuteScript function to src/lib/script-generator.ts for creating 150-word video scripts via OpenRouter.",
        "details": "Create new file src/lib/script-generator.ts (or add to existing skill-generator.ts):\n\n```typescript\nimport { OpenRouterClient } from './openrouter';\n\nconst SCRIPT_SYSTEM_PROMPT = `Ты — продюсер образовательных видео. Генерируй короткие, энергичные сценарии для 1-минутных видео. Отвечай только текстом сценария, без форматирования.`;\n\nexport function getScriptPrompt(skillName: string, summary: string): string {\n  return `Напиши сценарий для 1-минутного тизера навыка \"${skillName}\".\n\nКраткое описание навыка:\n${summary}\n\nТребования к сценарию:\n1. Длина: 130-150 слов (строго для 1 минуты видео)\n2. Язык: русский\n3. Структура:\n   - Хук (первые 10 слов — цепляющий вопрос или утверждение)\n   - Ценность (почему этот навык важен, 2-3 предложения)\n   - Призыв к действию (мотивация начать изучение)\n4. Стиль: разговорный, дружелюбный, без технического жаргона\n5. БЕЗ markdown, только чистый текст\n\nВыдай только текст сценария, без заголовков и пометок.`;\n}\n\nexport async function generateOneMinuteScript(\n  skillName: string,\n  summary: string,\n  client: OpenRouterClient,\n  modelId: string\n): Promise<string> {\n  const prompt = getScriptPrompt(skillName, summary);\n  \n  const response = await client.generate({\n    model: modelId,\n    messages: [\n      { role: 'system', content: SCRIPT_SYSTEM_PROMPT },\n      { role: 'user', content: prompt },\n    ],\n    temperature: 0.8,\n    max_tokens: 500,\n  });\n\n  // Clean any potential markdown\n  return response.replace(/```/g, '').trim();\n}\n```",
        "testStrategy": "1. Test prompt generation with sample skill name and summary\n2. Verify generated scripts are approximately 130-150 words\n3. Verify scripts are in Russian language\n4. Test with different skill types (technical, soft skills)\n5. Verify no markdown formatting in output",
        "priority": "high",
        "dependencies": [],
        "status": "done",
        "subtasks": []
      },
      {
        "id": 18,
        "title": "Create HeyGen Create API Route",
        "description": "Implement POST /api/heygen/create endpoint that generates script and initiates video creation.",
        "details": "Create src/app/api/heygen/create/route.ts:\n\n```typescript\nimport { NextRequest, NextResponse } from 'next/server';\nimport { OpenRouterClient } from '@/lib/openrouter';\nimport { generateOneMinuteScript } from '@/lib/script-generator';\nimport { generateVideo, HeyGenError } from '@/lib/heygen';\n\nexport async function POST(request: NextRequest) {\n  const openRouterKey = process.env.OPENROUTER_API_KEY;\n  const heygenKey = process.env.HEYGEN_API_KEY;\n\n  if (!openRouterKey) {\n    return NextResponse.json(\n      { error: 'OPENROUTER_API_KEY not configured' },\n      { status: 500 }\n    );\n  }\n\n  if (!heygenKey) {\n    return NextResponse.json(\n      { error: 'HEYGEN_API_KEY not configured' },\n      { status: 500 }\n    );\n  }\n\n  try {\n    const { skillName, summary, model } = await request.json();\n\n    if (!skillName || !summary) {\n      return NextResponse.json(\n        { error: 'skillName and summary are required' },\n        { status: 400 }\n      );\n    }\n\n    const modelId = model || 'anthropic/claude-3-haiku';\n\n    // Step 1: Generate script via OpenRouter\n    const client = new OpenRouterClient({ apiKey: openRouterKey });\n    const script = await generateOneMinuteScript(skillName, summary, client, modelId);\n\n    // Step 2: Create video via HeyGen\n    const videoId = await generateVideo(script, heygenKey);\n\n    return NextResponse.json({ videoId, script });\n  } catch (error) {\n    console.error('HeyGen create error:', error);\n    \n    if (error instanceof HeyGenError) {\n      return NextResponse.json(\n        { error: error.message },\n        { status: error.statusCode || 500 }\n      );\n    }\n\n    return NextResponse.json(\n      { error: error instanceof Error ? error.message : 'Unknown error' },\n      { status: 500 }\n    );\n  }\n}\n```",
        "testStrategy": "1. Test with missing API keys - verify 500 error\n2. Test with missing skillName/summary - verify 400 error\n3. Test successful flow with mocked dependencies\n4. Test error propagation from generateVideo\n5. Manual integration test with real APIs",
        "priority": "high",
        "dependencies": [
          16,
          17
        ],
        "status": "done",
        "subtasks": []
      },
      {
        "id": 19,
        "title": "Create HeyGen Status API Route",
        "description": "Implement GET /api/heygen/status endpoint for polling video generation status.",
        "details": "Create src/app/api/heygen/status/route.ts:\n\n```typescript\nimport { NextRequest, NextResponse } from 'next/server';\nimport { checkVideoStatus, HeyGenError } from '@/lib/heygen';\n\nexport async function GET(request: NextRequest) {\n  const heygenKey = process.env.HEYGEN_API_KEY;\n\n  if (!heygenKey) {\n    return NextResponse.json(\n      { error: 'HEYGEN_API_KEY not configured' },\n      { status: 500 }\n    );\n  }\n\n  const searchParams = request.nextUrl.searchParams;\n  const videoId = searchParams.get('videoId');\n\n  if (!videoId) {\n    return NextResponse.json(\n      { error: 'videoId query parameter is required' },\n      { status: 400 }\n    );\n  }\n\n  try {\n    const result = await checkVideoStatus(videoId, heygenKey);\n    \n    return NextResponse.json({\n      status: result.status,\n      url: result.url,\n    });\n  } catch (error) {\n    console.error('HeyGen status error:', error);\n    \n    if (error instanceof HeyGenError) {\n      return NextResponse.json(\n        { error: error.message },\n        { status: error.statusCode || 500 }\n      );\n    }\n\n    return NextResponse.json(\n      { error: error instanceof Error ? error.message : 'Unknown error' },\n      { status: 500 }\n    );\n  }\n}\n```",
        "testStrategy": "1. Test missing videoId parameter - verify 400 error\n2. Test missing API key - verify 500 error\n3. Test each status type response (processing, completed, failed, pending)\n4. Verify url is correctly returned when status is completed\n5. Test error handling for HeyGen API failures",
        "priority": "high",
        "dependencies": [
          16
        ],
        "status": "done",
        "subtasks": []
      },
      {
        "id": 20,
        "title": "Create useHeyGen Custom Hook",
        "description": "Implement src/hooks/useHeyGen.ts for managing video generation state and polling logic.",
        "details": "Create src/hooks/useHeyGen.ts following the existing useGeneration.ts pattern:\n\n```typescript\n'use client';\n\nimport { useState, useCallback, useRef } from 'react';\nimport type { VideoStatus, VideoData } from '@/types/heygen';\n\nexport interface HeyGenState {\n  loading: boolean;\n  script: string | null;\n  videoData: VideoData;\n  error: string | null;\n}\n\nconst initialState: HeyGenState = {\n  loading: false,\n  script: null,\n  videoData: { url: null, status: 'idle' },\n  error: null,\n};\n\nconst POLL_INTERVAL = 5000; // 5 seconds\nconst MAX_POLL_ATTEMPTS = 60; // 5 min max wait\n\nexport function useHeyGen() {\n  const [state, setState] = useState<HeyGenState>(initialState);\n  const pollRef = useRef<NodeJS.Timeout | null>(null);\n  const attemptRef = useRef(0);\n\n  const stopPolling = useCallback(() => {\n    if (pollRef.current) {\n      clearInterval(pollRef.current);\n      pollRef.current = null;\n    }\n    attemptRef.current = 0;\n  }, []);\n\n  const pollStatus = useCallback(async (videoId: string) => {\n    try {\n      const res = await fetch(`/api/heygen/status?videoId=${videoId}`);\n      const data = await res.json();\n\n      if (!res.ok) {\n        throw new Error(data.error || 'Status check failed');\n      }\n\n      if (data.status === 'completed' && data.url) {\n        stopPolling();\n        setState(prev => ({\n          ...prev,\n          loading: false,\n          videoData: { status: 'completed', url: data.url },\n        }));\n      } else if (data.status === 'failed') {\n        stopPolling();\n        setState(prev => ({\n          ...prev,\n          loading: false,\n          videoData: { status: 'failed', url: null },\n          error: 'Video generation failed',\n        }));\n      } else if (attemptRef.current >= MAX_POLL_ATTEMPTS) {\n        stopPolling();\n        setState(prev => ({\n          ...prev,\n          loading: false,\n          videoData: { status: 'failed', url: null },\n          error: 'Video generation timed out',\n        }));\n      }\n      attemptRef.current++;\n    } catch (error) {\n      stopPolling();\n      setState(prev => ({\n        ...prev,\n        loading: false,\n        videoData: { status: 'failed', url: null },\n        error: error instanceof Error ? error.message : 'Unknown error',\n      }));\n    }\n  }, [stopPolling]);\n\n  const startGeneration = useCallback(async (\n    skillName: string,\n    summary: string,\n    model?: string\n  ) => {\n    stopPolling();\n    setState({\n      loading: true,\n      script: null,\n      videoData: { status: 'generating_script', url: null },\n      error: null,\n    });\n\n    try {\n      const res = await fetch('/api/heygen/create', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ skillName, summary, model }),\n      });\n\n      const data = await res.json();\n\n      if (!res.ok) {\n        throw new Error(data.error || 'Failed to create video');\n      }\n\n      setState(prev => ({\n        ...prev,\n        script: data.script,\n        videoData: { status: 'processing', url: null },\n      }));\n\n      // Start polling\n      pollRef.current = setInterval(() => pollStatus(data.videoId), POLL_INTERVAL);\n      pollStatus(data.videoId); // Initial check\n\n    } catch (error) {\n      setState(prev => ({\n        ...prev,\n        loading: false,\n        videoData: { status: 'failed', url: null },\n        error: error instanceof Error ? error.message : 'Unknown error',\n      }));\n    }\n  }, [pollStatus, stopPolling]);\n\n  const reset = useCallback(() => {\n    stopPolling();\n    setState(initialState);\n  }, [stopPolling]);\n\n  return { state, startGeneration, reset };\n}\n```",
        "testStrategy": "1. Test initial state values\n2. Test startGeneration updates state to loading/generating_script\n3. Test polling starts after successful create call\n4. Test polling stops on completed/failed status\n5. Test timeout after MAX_POLL_ATTEMPTS\n6. Test reset clears state and stops polling\n7. Test error handling in create and poll phases",
        "priority": "high",
        "dependencies": [
          18,
          19
        ],
        "status": "done",
        "subtasks": []
      },
      {
        "id": 21,
        "title": "Create VideoTeaser UI Component",
        "description": "Implement src/components/video-teaser.tsx with states for idle, scripting, processing, completed, and error.",
        "details": "Create src/components/video-teaser.tsx:\n\n```typescript\n'use client';\n\nimport { useHeyGen } from '@/hooks/useHeyGen';\nimport { Loader2, Video, AlertCircle, RefreshCw } from 'lucide-react';\n\ninterface VideoTeaserProps {\n  skillName: string;\n  summary: string;\n  model?: string;\n}\n\nexport function VideoTeaser({ skillName, summary, model }: VideoTeaserProps) {\n  const { state, startGeneration, reset } = useHeyGen();\n  const { loading, script, videoData, error } = state;\n\n  const handleGenerate = () => {\n    startGeneration(skillName, summary, model);\n  };\n\n  // Idle state\n  if (videoData.status === 'idle') {\n    return (\n      <button\n        onClick={handleGenerate}\n        className=\"w-full flex items-center justify-center gap-2 px-4 py-3 text-[15px] font-medium text-[#1d1d1f] bg-[#f5f5f7] hover:bg-[#e8e8ed] rounded-xl transition-colors\"\n      >\n        <Video className=\"w-4 h-4\" />\n        Сгенерировать 1-мин тизер\n      </button>\n    );\n  }\n\n  // Error state\n  if (videoData.status === 'failed') {\n    return (\n      <div className=\"bg-red-50 border border-red-200 rounded-xl p-4 space-y-3\">\n        <div className=\"flex items-center gap-2 text-red-600\">\n          <AlertCircle className=\"w-4 h-4\" />\n          <span className=\"text-sm font-medium\">{error || 'Ошибка генерации'}</span>\n        </div>\n        <button\n          onClick={() => { reset(); handleGenerate(); }}\n          className=\"flex items-center gap-2 text-sm text-red-600 hover:text-red-700\"\n        >\n          <RefreshCw className=\"w-3 h-3\" />\n          Попробовать снова\n        </button>\n      </div>\n    );\n  }\n\n  // Generating script state\n  if (videoData.status === 'generating_script') {\n    return (\n      <div className=\"bg-[#f5f5f7] rounded-xl p-4 flex items-center gap-3\">\n        <Loader2 className=\"w-4 h-4 animate-spin text-[#86868b]\" />\n        <span className=\"text-sm text-[#86868b]\">Пишу сценарий...</span>\n      </div>\n    );\n  }\n\n  // Processing state (script ready, video rendering)\n  if (videoData.status === 'processing') {\n    return (\n      <div className=\"bg-[#f5f5f7] rounded-xl p-4 space-y-4\">\n        {script && (\n          <div>\n            <p className=\"text-xs font-semibold text-[#86868b] uppercase tracking-wider mb-2\">Сценарий</p>\n            <p className=\"text-[15px] text-[#1d1d1f] leading-relaxed whitespace-pre-wrap\">{script}</p>\n          </div>\n        )}\n        <div className=\"flex items-center gap-3 pt-2 border-t border-[rgba(0,0,0,0.06)]\">\n          <Loader2 className=\"w-4 h-4 animate-spin text-[#86868b]\" />\n          <span className=\"text-sm text-[#86868b]\">Рендеринг аватара (~1 мин)...</span>\n        </div>\n      </div>\n    );\n  }\n\n  // Completed state\n  if (videoData.status === 'completed' && videoData.url) {\n    return (\n      <div className=\"space-y-3\">\n        <video\n          src={videoData.url}\n          controls\n          className=\"w-full rounded-xl\"\n          autoPlay={false}\n        />\n        <button\n          onClick={reset}\n          className=\"text-sm text-[#86868b] hover:text-[#1d1d1f]\"\n        >\n          Сгенерировать новый\n        </button>\n      </div>\n    );\n  }\n\n  return null;\n}\n```",
        "testStrategy": "1. Test idle state renders button correctly\n2. Test click triggers startGeneration\n3. Test generating_script state shows loader\n4. Test processing state displays script and rendering message\n5. Test completed state renders video player with URL\n6. Test failed state shows error and retry button\n7. Test retry button resets and restarts generation",
        "priority": "high",
        "dependencies": [
          20
        ],
        "status": "done",
        "subtasks": []
      },
      {
        "id": 22,
        "title": "Integrate VideoTeaser into SkillAccordion",
        "description": "Add VideoTeaser component to the SkillAccordion, positioned after the project section.",
        "details": "Modify src/components/skill-accordion.tsx:\n\n```typescript\n'use client';\n\nimport { useState } from 'react';\nimport { ChevronDown } from 'lucide-react';\nimport type { Skill } from '@/types/skills';\nimport { VideoTeaser } from './video-teaser';\n\ninterface SkillAccordionProps {\n  skill: Skill;\n  model?: string; // Pass the model used for generation\n}\n\nexport function SkillAccordion({ skill, model }: SkillAccordionProps) {\n  const [isOpen, setIsOpen] = useState(false);\n\n  return (\n    <div\n      id={`skill-${skill.id}`}\n      className=\"apple-card overflow-hidden\"\n    >\n      {/* Header - unchanged */}\n      <button\n        onClick={() => setIsOpen(!isOpen)}\n        className=\"w-full flex items-center justify-between p-5 text-left hover:bg-[#fafafa] transition-colors\"\n      >\n        {/* ... existing header code ... */}\n      </button>\n\n      {/* Content */}\n      {isOpen && (\n        <div className=\"px-5 pb-5 space-y-6 border-t border-[rgba(0,0,0,0.06)]\">\n          {/* ... existing sections (source, details, technologies, questions, project) ... */}\n\n          {/* NEW: Video Teaser Section */}\n          <div>\n            <h4 className=\"apple-section-title\">Видео-тизер</h4>\n            <VideoTeaser\n              skillName={skill.name}\n              summary={skill.summary}\n              model={model}\n            />\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n```\n\nAlso update SkillsList to pass model prop if needed:\n```typescript\n// In skills-list.tsx, pass model to SkillAccordion\n<SkillAccordion key={skill.id} skill={skill} model={selectedModel} />\n```",
        "testStrategy": "1. Verify VideoTeaser section appears after Project section\n2. Verify skill name and summary are correctly passed\n3. Test accordion open/close with VideoTeaser present\n4. Test VideoTeaser isolation (one skill's video doesn't affect others)\n5. Visual regression test for component layout",
        "priority": "high",
        "dependencies": [
          21
        ],
        "status": "done",
        "subtasks": []
      },
      {
        "id": 23,
        "title": "Add Error Handling and Loading States",
        "description": "Implement comprehensive error handling across all HeyGen-related components and API routes with user-friendly messages.",
        "details": "Enhance error handling throughout the stack:\n\n1. **HeyGen Library Error Types** (update src/lib/heygen.ts):\n```typescript\nexport class HeyGenError extends Error {\n  constructor(\n    message: string,\n    public code: 'AUTH_ERROR' | 'RATE_LIMIT' | 'INVALID_REQUEST' | 'SERVER_ERROR' | 'NETWORK_ERROR',\n    public statusCode?: number\n  ) {\n    super(message);\n    this.name = 'HeyGenError';\n  }\n}\n\nfunction mapErrorCode(status: number): HeyGenError['code'] {\n  if (status === 401) return 'AUTH_ERROR';\n  if (status === 429) return 'RATE_LIMIT';\n  if (status >= 400 && status < 500) return 'INVALID_REQUEST';\n  return 'SERVER_ERROR';\n}\n```\n\n2. **User-friendly error messages** (update video-teaser.tsx):\n```typescript\nconst getErrorMessage = (error: string): string => {\n  if (error.includes('AUTH')) return 'Ошибка авторизации API';\n  if (error.includes('RATE_LIMIT')) return 'Превышен лимит запросов';\n  if (error.includes('timed out')) return 'Превышено время ожидания';\n  return 'Произошла ошибка. Попробуйте позже.';\n};\n```\n\n3. **API route validation** (both routes):\n```typescript\n// Add request body validation\nconst { skillName, summary, model } = await request.json();\nif (typeof skillName !== 'string' || skillName.length === 0) {\n  return NextResponse.json({ error: 'Invalid skillName' }, { status: 400 });\n}\nif (typeof summary !== 'string' || summary.length === 0) {\n  return NextResponse.json({ error: 'Invalid summary' }, { status: 400 });\n}\n```",
        "testStrategy": "1. Test each error type displays correct user message\n2. Test API validation rejects malformed requests\n3. Test network failure handling\n4. Test timeout scenarios\n5. Test rate limit handling with retry capability",
        "priority": "medium",
        "dependencies": [
          22
        ],
        "status": "done",
        "subtasks": []
      },
      {
        "id": 24,
        "title": "End-to-End Testing and Documentation",
        "description": "Create comprehensive end-to-end tests for the video teaser feature and update project documentation.",
        "details": "1. **Manual E2E Test Checklist:**\n- [ ] Set up valid HEYGEN_API_KEY in .env.local\n- [ ] Generate skills from CSV\n- [ ] Open a skill accordion\n- [ ] Click 'Generate 1-min Teaser' button\n- [ ] Verify script appears within ~10 seconds\n- [ ] Verify video player appears within ~60-120 seconds\n- [ ] Verify video plays with audio\n- [ ] Test retry on error\n- [ ] Test multiple skills simultaneously\n\n2. **Update README.md** (or create HeyGen section):\n```markdown\n### Video Teaser Feature\n\nThe app can generate 1-minute video teasers for each skill using HeyGen AI avatars.\n\n#### Setup\n1. Get API key from [HeyGen](https://heygen.com)\n2. Add to `.env.local`:\n   ```\n   HEYGEN_API_KEY=your_key_here\n   ```\n\n#### Usage\n1. Generate skills from CSV\n2. Expand any skill accordion\n3. Click 'Сгенерировать 1-мин тизер'\n4. Wait for script generation (~10s)\n5. Wait for video rendering (~60-120s)\n6. Video player will appear automatically\n\n#### Troubleshooting\n- **Video stuck on processing**: HeyGen may be under load, wait or retry\n- **Authorization error**: Check HEYGEN_API_KEY is valid\n- **Rate limit**: Wait a few minutes before retrying\n```\n\n3. **Add type exports to index files if needed**",
        "testStrategy": "1. Execute full manual E2E test checklist\n2. Verify documentation accuracy\n3. Test with fresh project setup (clone, configure, run)\n4. Cross-browser testing (Chrome, Firefox, Safari)\n5. Mobile responsiveness check for video player",
        "priority": "medium",
        "dependencies": [
          23
        ],
        "status": "done",
        "subtasks": []
      }
    ],
    "metadata": {
      "created": "2025-11-29T17:21:14.104Z",
      "updated": "2025-12-11T20:13:39.216Z",
      "description": "Tasks for master context"
    }
  }
}